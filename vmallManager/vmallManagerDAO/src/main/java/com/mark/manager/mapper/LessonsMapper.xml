<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mark.manager.mapper.CoursesMapper">
    <sql id="Update_By_Example_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Nov 27 17:05:37 CST 2018.
        -->
        <where>
            <trim prefix="(" prefixOverrides="and" suffix=")">
                and lesson_id IN
                <foreach close=")" collection="lessonIds" item="id" open="(" separator=",">
                    #{id}
                </foreach>
            </trim>
            and lesson_course_id = #{courseId}
            and lesson_pid = #{lessonPid}
        </where>
    </sql>
    <update id="updateLessonsSequence">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Nov 27 17:05:37 CST 2018.
        -->
        update vpro_courses_lesson_list
        <set>
            lesson_lid = `lesson_lid`
            <if test="type != 0">
              +
            </if>
            #{offset,jdbcType=INTEGER}
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause" />
        </if>
    </update>
    <!--标题内部上移-->
    <select id="getLessonsNeedReLocation">
      SELECT
        lesson_id
      from
        vpro_courses_lesson_list
      WHERE
        lesson_lid <![CDATA[>=]]> #{start,jdbcType=INTEGER}
        AND lesson_lid <![CDATA[<]]> #{end,jdbcType=INTEGER}
        AND lesson_course_id <![CDATA[=]]> #{courseId,jdbcType=INTEGER}
    </select>
</mapper>